<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Redirección condicional</title>
  <style>
    .error-message {
      color: white;
      background-color: #d9534f;
      padding: 15px;
      border-radius: 8px;
      margin: 20px auto;
      width: 80%;
      max-width: 400px;
      text-align: center;
      font-family: sans-serif;
    }
    .audio-hidden {
      display: none;
    }
  </style>
</head>
<body>
  
  <script>
    // Función para detectar el sistema operativo (simplificado)
    function isAndroid() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      return /android/i.test(userAgent);
    }

    function isIOS() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      // Comprueba si es iPhone, iPad o iPod
      return /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;
    }

    // El cuerpo de la acción (código original del usuario)
    function runIphoneLogic() {
      var VARIABLE = (function() {
        var urls = [
          // Tu lista de URLs
          "https://raw.githubusercontent.com/zokosting/QR/main/5%20minutos%20de%20afirmaciones%20para%20recordarte%20lo%20incre%C3%ADble%20que%20eres.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Afirmaciones%20poderosas%20para%20volver%20a%20confiar%20en%20ti.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Agradecimientos.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Atrae%20un%20buen%20d%C3%ADa.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Cada%20Paso%20Cuenta.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Cosas%20a%20recordar%20este%20a%C3%B1o.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Dejar%20ir%20el%20pasado.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/El%20poder%20de%20la%20historia%20que%20te%20cuentas.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Encuentra%20el%20balance%20en%20tu%20d%C3%ADa%20a%20d%C3%ADa.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Para%20encontrar%20paz%20hoy.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Recuerda%20tu%20valor.mp3",
          "https://raw.githubusercontent.com/zokosting/QR/main/Si%C3%A9ntete%20orgulloso%20de%20lo%20que%20eres.mp3"
        ];
        return urls[Math.floor(Math.random() * urls.length)];
      })();

      // 1. Renderiza la etiqueta <audio> con el src aleatorio
      document.write('<audio autoplay>');
      document.write('<source src="' + VARIABLE + '" type="audio/mpeg">');
      document.write('Tu navegador no soporta el elemento de audio.');
      document.write('</audio>');
      // NOTA: Para iPhone, el código original funcionaba porque Safari es tolerante con este tipo de manipulación del DOM.
    }

    // Decide qué renderizar
    if (isIOS()) {
      runIphoneLogic();
      // Si es iOS, no se renderiza nada más por document.write
    } else if (isAndroid()) {
      // 2. Renderiza el mensaje de error para Android
      document.write('<div class="error-message">');
      document.write('❌ Acceso denegado. Este contenido está configurado para ejecutarse solo en dispositivos iPhone/iOS.');
      document.write('</div>');
    } else {
      // 3. Renderiza un mensaje neutro si no es iOS ni Android
      document.write('<div class="error-message">');
      document.write('⚠️ Dispositivo no identificado. Este contenido está optimizado para iPhone (iOS) y puede no funcionar.');
      document.write('</div>');
    }
  </script>
  
  <!-- El resto del cuerpo se renderiza después de la inyección de document.write -->
</body>
</html>
