<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <!-- Meta tag esencial para la correcta visualizaci贸n en dispositivos m贸viles -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SABES QUE S PUEDES</title>
  <style>
    /* ---------------------------------------------------------------- */
    /* ESTILOS BASE Y CENTRADO ESPECFICO */
    /* ---------------------------------------------------------------- */
    html, body {
        height: 100%; 
        width: 100%;
        margin: 0;
        /* Se eliminan los estilos de Flexbox global para evitar centrar el error */
        font-family: sans-serif;
    }
    
    /* Contenedor espec铆fico para centrar el mensaje de activaci贸n (Android) */
    .centered-container {
        height: 100%;
        width: 100%;
        position: fixed; /* Ocupa toda la pantalla */
        top: 0;
        left: 0;
        display: flex; /* Habilita Flexbox */
        justify-content: center; /* Centrado horizontal */
        align-items: center; /* Centrado vertical */
        flex-direction: column;
        text-align: center;
        background-color: white; /* Asegura que cubra el fondo */
    }

    .error-message {
      /* Estilo del mensaje de error (no centrado verticalmente, solo horizontalmente por margin: auto) */
      color: white;
      background-color: #f25041 ;
      padding: 15px;
      border-radius: 8px;
      margin: 20px auto; /* Centrado horizontal */
      width: 80%;
      max-width: 400px;
    }
    
    .audio-hidden {
      display: none;
    }
    /* Estilos para la reproducci贸n robusta (Android/Universal) */
    #audioPlayer {
        display: none; /* Oculta el reproductor en el caso de la l贸gica robusta */
    }
    #unmuteMessage {
      color: gray;
      /* TAMAO MAYOR Y PROPORCIONAL A LA PANTALLA (Ajustado a 4.5vw para mejor compatibilidad m贸vil) */
      font-size: 4.5vw; 
      /* Reducci贸n del padding fijo para evitar problemas de desbordamiento en dispositivos peque帽os */
      padding: 10px;
    }
  </style>
</head>
<body>
  
  <script>
    // Funci贸n para detectar el sistema operativo
    function isAndroid() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      return /android/i.test(userAgent);
    }

    function isIOS() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      // Comprueba si es iPhone, iPad o iPod
      return /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;
    }

    // LISTA GLOBAL DE URLS (para ser utilizada por ambas l贸gicas)
    const audioUrls = [
        "https://raw.githubusercontent.com/zokosting/QR/main/5%20minutos%20de%20afirmaciones%20para%20recordarte%20lo%20incre%C3%ADble%20que%20eres.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Afirmaciones%20poderosas%20para%20volver%20a%20confiar%20en%20ti.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Agradecimientos.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Atrae%20un%20buen%20d%C3%ADa.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Cada%20Paso%20Cuenta.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Cosas%20a%20recordar%20este%20a%C3%B1o.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Dejar%20ir%20el%20pasado.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/El%20poder%20de%20la%20historia%20que%20te%20cuentas.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Encuentra%20el%20balance%20en%20tu%20d%C3%ADa%20a%20d%C3%ADa.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Para%20encontrar%20paz%20hoy.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Recuerda%20tu%20valor.mp3",
        "https://raw.githubusercontent.com/zokosting/QR/main/Si%C3%A9ntete%20orgulloso%20de%20lo%20que%20eres.mp3"
    ];

    // LGICA PARA IPHONE (Refactorizado para usar manipulaci贸n DOM)
    function runIphoneLogic() {
      var randomIndex = Math.floor(Math.random() * audioUrls.length);
      var VARIABLE = audioUrls[randomIndex];

      // Crear la etiqueta <audio> con el src aleatorio y autoplay
      const audioPlayer = document.createElement('audio');
      audioPlayer.autoplay = true;

      const audioSource = document.createElement('source');
      audioSource.src = VARIABLE;
      audioSource.type = 'audio/mpeg';

      audioPlayer.appendChild(audioSource);
      audioPlayer.textContent = 'Tu navegador no soporta el elemento de audio.';
      
      // Inyectar en el DOM (prepend asegura que se a帽ade al inicio del body)
      document.body.prepend(audioPlayer);
    }
    
    // LGICA ROBUSTA PARA ANDROID (Refactorizado para usar manipulaci贸n DOM y evitar document.write)
    function runAndroidAudioLogic() {
      const randomIndex = Math.floor(audioUrls.length * Math.random());
      const randomUrl = audioUrls[randomIndex];

      // 1. Crear y configurar el reproductor de audio (oculto y muteado)
      const audioPlayer = document.createElement('audio');
      audioPlayer.id = 'audioPlayer';
      audioPlayer.autoplay = true;
      audioPlayer.muted = true;
      
      const audioSource = document.createElement('source');
      audioSource.src = randomUrl;
      audioSource.type = 'audio/mpeg';
      audioPlayer.appendChild(audioSource);
      audioPlayer.textContent = 'Tu navegador no soporta el elemento de audio.';
      
      document.body.appendChild(audioPlayer);

      // 2. Crear y configurar el contenedor centrado y el mensaje
      const centeredContainer = document.createElement('div');
      centeredContainer.className = 'centered-container';

      const unmuteMessage = document.createElement('p');
      unmuteMessage.id = 'unmuteMessage';
      // Usar textContent para evitar problemas con la inyecci贸n HTML en el string
      unmuteMessage.textContent = ' Haz clic en cualquier parte para escuchar.';
      
      centeredContainer.appendChild(unmuteMessage);
      document.body.appendChild(centeredContainer);

      // 3. Inicializar reproducci贸n y listener
      audioPlayer.load();
      // Intentar reproducir, capturando el error de Autoplay (necesario en m贸viles)
      audioPlayer.play().catch(error => { console.warn("Autoplay fall贸:", error); });

      // Listener para desmutear y ocultar el mensaje en el primer clic
      document.addEventListener("click", function() {
          if (audioPlayer.muted) {
              audioPlayer.muted = false;
              // Ocultar el contenedor centrado (que cubre toda la pantalla)
              centeredContainer.style.display = 'none';
          }
      }, { once: true });
    }

    // Decide qu茅 renderizar
    if (isIOS()) {
      runIphoneLogic();
      // Si es iOS, se ejecuta la l贸gica inicial.
    } else if (isAndroid()) {
      // Ejecuta la l贸gica robusta para Android (mensaje centrado y grande)
      runAndroidAudioLogic();
    } else {
      // Renderiza un mensaje neutro si no es iOS ni Android
      document.write('<div class="error-message">');
      document.write('锔 Denegado. El contenido est谩 optimizado para funcionar en dispositivos m贸viles.');
      document.write('</div>');
    }
  </script>
  
  <!-- El resto del cuerpo se renderiza despu茅s de la inyecci贸n de document.write -->
</body>
</html>
